
<div class="col-lg-2 content-left" style="border: solid #ccc 1px;padding: 0;">
            <div class="col-lg-12" style="padding: 0;">
                <div id="chat-content" style="width: 100%;height: 300px;border: solid #ccc 1px;"></div>
                <input type="text" name="" id="input-content">
                <button type="button" id="send-btn" onclick="sendContent()">发送</button>
            </div>
</div>
<script type="text/javascript">
    function sendContent()
    {
        var d = {user:'{$name}',data:document.getElementById('input-content').value};
        console.log(d);
        var djson = JSON.stringify(d);
        ws.send(djson);
    }
    ws = new WebSocket("ws://127.0.0.1:2347");
    var sendBtn = document.getElementById("send-btn");
    var showContent = document.getElementById("chat-content");
    ws.onmessage = function(e) {
        var para = document.createElement("p");
        var node = document.createTextNode(e.data);
        para.appendChild(node);
        showContent.appendChild(para);
        console.log(e.data);
    };

</script>